import{a as _}from"./_api-7b5c2504.js";window.$=window.jQuery=require("jquery");require("nestable2");const n=document.getElementById("drawer-create-menu-item"),r=document.querySelector(".dd"),o=n.querySelector('input[name="parent_id"]'),s=n.querySelector("form"),w=s.action,l={init:a=>{$(r).nestable({callback:async()=>{const t=await(await _(`/navigations/${a}/sort`,{method:"POST",body:JSON.stringify({items:$(".dd").nestable("toArray")})})).json();t.success===!0&&Feadmin.Toastr.add(t.message)},handleClass:"navigation-item",expandBtnHTML:`<button data-action="expand" class="dd-expand">
                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" class="w-5 h-5">
                    <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
                </svg>
            </button>`,collapseBtnHTML:`<button data-action="collapse" class="dd-collapse">
                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" class="w-5 h-5">
                    <path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
                </svg>
            </button>`})},handleIsSmartMenu:()=>{const a=document.querySelector("[data-manuel-item]"),e=document.querySelector("[data-smart-item]");item_is_smart_menu.checked?(a.classList.add("fd-hidden"),e.classList.remove("fd-hidden")):(a.classList.remove("fd-hidden"),e.classList.add("fd-hidden"))},handleLinkable:()=>{const a=document.querySelector('[data-form-group="link"]');item_linkable.value===""?a.classList.remove("fd-hidden"):a.classList.add("fd-hidden")}};n.addEventListener("drawer.open",({detail:{related:a,item:e,isEdit:t,isError:c}})=>{a&&(o.value=a.dataset.parentId||""),s.action=t?s.dataset.editAction.replace(":id",e.id):w,s.querySelector('input[name="_method"]').value=t?"PUT":"POST";const i=n.querySelector('input[name="title"]'),u=n.querySelector('input[name="is_smart_menu"]'),p=n.querySelector('select[name="smart_type"]'),v=n.querySelector('input[name="smart_limit"]'),h=n.querySelector('input[name="link"]'),d=n.querySelector('input[name="is_active"]'),y=n.querySelector('input[name="open_in_new_tab"]');n.querySelector('select[name="linkable"]'),c||(i.value=(e==null?void 0:e.title)||"",u.checked=(e==null?void 0:e.type)===3,p.value=(e==null?void 0:e.smart_type)||"",v.value=(e==null?void 0:e.smart_limit)||"",h.value=(e==null?void 0:e.link)||"",d.checked=e==null?void 0:e.is_active,y.checked=e==null?void 0:e.open_in_new_tab,t||(d.checked=!0),(e==null?void 0:e.type)===1?item_linkable.value="homepage":(e==null?void 0:e.type)===2?item_linkable.value=JSON.stringify({linkable_id:e==null?void 0:e.linkable_id,linkable_type:e==null?void 0:e.linkable_type}):item_linkable.value=""),l.handleIsSmartMenu(),l.handleLinkable()});n.addEventListener("drawer.hide",()=>o.value="");item_is_smart_menu.addEventListener("change",l.handleIsSmartMenu);item_linkable.addEventListener("change",l.handleLinkable);r.querySelectorAll('[data-toggle="edit"]').forEach(a=>{a.addEventListener("click",()=>{const e=JSON.parse(a.dataset.item);Feadmin.Drawer.open(n,{item:e,isEdit:!0})})});window.Feadmin.Navigation=l;
