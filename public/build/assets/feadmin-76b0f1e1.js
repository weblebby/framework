import{_ as Ue}from"./preload-helper-edc1b5d6.js";import{C as Ee}from"./_tab-2f4e71a8.js";import"./_tagify-37881a53.js";import"./_api-32e76925.js";const A={open:(t,e={})=>{setTimeout(()=>t.classList.toggle("drawer--open"),100),A.overlay(t);const r=t.querySelector("[data-drawer-focus]");r==null||r.focus(),t.dispatchEvent(new CustomEvent("drawer.open",{detail:e}))},close:(t,e={})=>{t.classList.toggle("drawer--open");const r=document.querySelector(".drawer__overlay");r.classList.remove("drawer__overlay--fade-in"),t.dispatchEvent(new CustomEvent("drawer.hide",{detail:e})),setTimeout(()=>{r.remove(),t.dispatchEvent(new CustomEvent("drawer.hidden",{detail:e}))},300)},closeCurrent:()=>{A.close(document.querySelector(".drawer--open"))},overlay:t=>{const e=document.createElement("div");e.classList.add("drawer__overlay"),document.body.append(e),setTimeout(()=>{e.classList.add("drawer__overlay--fade-in")},10),e.addEventListener("click",()=>{A.close(t,{related:e})})}};document.addEventListener("click",t=>{const e=t.target.closest("[data-drawer]");if(e){t.preventDefault();const r=document.querySelector(e.dataset.drawer);r.classList.contains("drawer--open")?A.close(r,{related:e}):A.open(r,{related:e})}});document.querySelectorAll("[data-drawer-close]").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),A.close(t.closest(".drawer"),{related:t})})});window.Feadmin.Drawer=A;const je={toastr:null,init(){this.toastr=document.createElement("div"),this.toastr.classList.add("toastr"),document.body.append(this.toastr),this.toastr.addEventListener("click",t=>{const e=t.target;e.classList.contains("toastr__item")&&this.remove(e)})},add(t){const e=document.createElement("div");e.classList.add("toastr__item"),e.innerText=t,this.toastr.appendChild(e),setTimeout(()=>{e.classList.add("toastr__item--born")},10),setTimeout(()=>{this.remove(e)},3e3)},remove(t){t.classList.remove("toastr__item--born"),setTimeout(()=>t.remove(),300)}};je.init();window.Feadmin.Toastr=je;const Xe=Ue(()=>import("./ckeditor-49bca7a2.js"),[]),N={selector:"[data-ckeditor]",basicSelector:"[data-basic-ckeditor]",init:t=>{Xe.then(({default:{Editor:e}})=>{t._CKEDITOR=e.create(t)})},initBasic:t=>{Xe.then(({default:{Editor:e}})=>{t._CKEDITOR=e.create(t,{toolbar:["undo","redo","|","heading","|","bold","italic","link","|","bulletedList","numberedList"]})})}};document.querySelectorAll(N.selector).forEach(t=>N.init(t));document.querySelectorAll(N.basicSelector).forEach(t=>N.initBasic(t));const ct=t=>t.replace(/\[\]/g,"").replace(/\[/g,".").replace(/\]/g,""),dt=t=>ct(t).replace(/\./g,"_"),ut=t=>{const e=t.split(".");let r="";return e.forEach((n,s)=>{if(s===0){r+=n;return}if(n==="*"){r+="[]";return}r+=`[${n}]`}),r};function S(t,e){if(t==null)return null;function r(s){return s==null||e==null?!1:ht(e)?Element.prototype.matches.call(s,e):gt(e)?[...e].includes(s):mt(e)?e===s:ft(e)?e(s):!1}let n=t;do{if(n=n.correspondingUseElement||n.correspondingElement||n,r(n))return n;n=(n==null?void 0:n.parentNode)||null}while(n!=null&&n!==document.body&&n!==document);return null}function ht(t){return typeof t=="string"}function gt(t){return t instanceof NodeList||t instanceof Array}function mt(t){return t instanceof Node}function ft(t){return typeof t=="function"}class ve{constructor(e){this.draggable=e}attach(){throw new Error("Not Implemented")}detach(){throw new Error("Not Implemented")}}const de=Symbol("onInitialize"),ue=Symbol("onDestroy"),Ye=Symbol("announceEvent"),we=Symbol("announceMessage"),pt="aria-relevant",St="aria-atomic",vt="aria-live",bt="role",yt={expire:7e3};class Et extends ve{constructor(e){super(e),this.options={...yt,...this.getOptions()},this.originalTriggerMethod=this.draggable.trigger,this[de]=this[de].bind(this),this[ue]=this[ue].bind(this)}attach(){this.draggable.on("draggable:initialize",this[de])}detach(){this.draggable.off("draggable:destroy",this[ue])}getOptions(){return this.draggable.options.announcements||{}}[Ye](e){const r=this.options[e.type];r&&typeof r=="string"&&this[we](r),r&&typeof r=="function"&&this[we](r(e))}[we](e){wt(e,{expire:this.options.expire})}[de](){this.draggable.trigger=e=>{try{this[Ye](e)}finally{this.originalTriggerMethod.call(this.draggable,e)}}}[ue](){this.draggable.trigger=this.originalTriggerMethod}}const Ce=Ct();function wt(t,{expire:e}){const r=document.createElement("div");return r.textContent=t,Ce.appendChild(r),setTimeout(()=>{Ce.removeChild(r)},e)}function Ct(){const t=document.createElement("div");return t.setAttribute("id","draggable-live-region"),t.setAttribute(pt,"additions"),t.setAttribute(St,"true"),t.setAttribute(vt,"assertive"),t.setAttribute(bt,"log"),t.style.position="fixed",t.style.width="1px",t.style.height="1px",t.style.top="-1px",t.style.overflow="hidden",t}document.addEventListener("DOMContentLoaded",()=>{document.body.appendChild(Ce)});const X=Symbol("onInitialize"),O=Symbol("onDestroy"),xt={};class Lt extends ve{constructor(e){super(e),this.options={...xt,...this.getOptions()},this[X]=this[X].bind(this),this[O]=this[O].bind(this)}attach(){this.draggable.on("draggable:initialize",this[X]).on("draggable:destroy",this[O])}detach(){this.draggable.off("draggable:initialize",this[X]).off("draggable:destroy",this[O]),this[O]()}getOptions(){return this.draggable.options.focusable||{}}getElements(){return[...this.draggable.containers,...this.draggable.getDraggableElements()]}[X](){requestAnimationFrame(()=>{this.getElements().forEach(e=>At(e))})}[O](){requestAnimationFrame(()=>{this.getElements().forEach(e=>Dt(e))})}}const xe=[];function At(t){!t.getAttribute("tabindex")&&t.tabIndex===-1&&(xe.push(t),t.tabIndex=0)}function Dt(t){const e=xe.indexOf(t);e!==-1&&(t.tabIndex=-1,xe.splice(e,1))}class D{constructor(e){this._canceled=!1,this.data=e}get type(){return this.constructor.type}get cancelable(){return this.constructor.cancelable}cancel(){this._canceled=!0}canceled(){return this._canceled}clone(e){return new this.constructor({...this.data,...e})}}D.type="event";D.cancelable=!1;class q extends D{constructor(e){super(e),this.data=e}get source(){return this.data.source}get originalSource(){return this.data.originalSource}get sourceContainer(){return this.data.sourceContainer}get sensorEvent(){return this.data.sensorEvent}get dragEvent(){return this.data.dragEvent}get originalEvent(){return this.sensorEvent?this.sensorEvent.originalEvent:null}}class Ve extends q{}Ve.type="mirror:create";class He extends q{get mirror(){return this.data.mirror}}He.type="mirror:created";class Ke extends q{get mirror(){return this.data.mirror}}Ke.type="mirror:attached";class De extends q{get mirror(){return this.data.mirror}get passedThreshX(){return this.data.passedThreshX}get passedThreshY(){return this.data.passedThreshY}}De.type="mirror:move";De.cancelable=!0;class Je extends q{get mirror(){return this.data.mirror}get passedThreshX(){return this.data.passedThreshX}get passedThreshY(){return this.data.passedThreshY}}Je.type="mirror:moved";class Ie extends q{get mirror(){return this.data.mirror}}Ie.type="mirror:destroy";Ie.cancelable=!0;const Y=Symbol("onDragStart"),_=Symbol("onDragMove"),$=Symbol("onDragStop"),k=Symbol("onMirrorCreated"),B=Symbol("onMirrorMove"),G=Symbol("onScroll"),_e=Symbol("getAppendableContainer"),It={constrainDimensions:!1,xAxis:!0,yAxis:!0,cursorOffsetX:null,cursorOffsetY:null,thresholdX:null,thresholdY:null};class Ot extends ve{constructor(e){super(e),this.options={...It,...this.getOptions()},this.scrollOffset={x:0,y:0},this.initialScrollOffset={x:window.scrollX,y:window.scrollY},this[Y]=this[Y].bind(this),this[_]=this[_].bind(this),this[$]=this[$].bind(this),this[k]=this[k].bind(this),this[B]=this[B].bind(this),this[G]=this[G].bind(this)}attach(){this.draggable.on("drag:start",this[Y]).on("drag:move",this[_]).on("drag:stop",this[$]).on("mirror:created",this[k]).on("mirror:move",this[B])}detach(){this.draggable.off("drag:start",this[Y]).off("drag:move",this[_]).off("drag:stop",this[$]).off("mirror:created",this[k]).off("mirror:move",this[B])}getOptions(){return this.draggable.options.mirror||{}}[Y](e){if(e.canceled())return;"ontouchstart"in window&&document.addEventListener("scroll",this[G],!0),this.initialScrollOffset={x:window.scrollX,y:window.scrollY};const{source:r,originalSource:n,sourceContainer:s,sensorEvent:o}=e;this.lastMirrorMovedClient={x:o.clientX,y:o.clientY};const a=new Ve({source:r,originalSource:n,sourceContainer:s,sensorEvent:o,dragEvent:e});if(this.draggable.trigger(a),qt(o)||a.canceled())return;const l=this[_e](r)||s;this.mirror=r.cloneNode(!0);const c=new He({source:r,originalSource:n,sourceContainer:s,sensorEvent:o,dragEvent:e,mirror:this.mirror}),d=new Ke({source:r,originalSource:n,sourceContainer:s,sensorEvent:o,dragEvent:e,mirror:this.mirror});this.draggable.trigger(c),l.appendChild(this.mirror),this.draggable.trigger(d)}[_](e){if(!this.mirror||e.canceled())return;const{source:r,originalSource:n,sourceContainer:s,sensorEvent:o}=e;let a=!0,l=!0;if(this.options.thresholdX||this.options.thresholdY){const{x:d,y:u}=this.lastMirrorMovedClient;if(Math.abs(d-o.clientX)<this.options.thresholdX?a=!1:this.lastMirrorMovedClient.x=o.clientX,Math.abs(u-o.clientY)<this.options.thresholdY?l=!1:this.lastMirrorMovedClient.y=o.clientY,!a&&!l)return}const c=new De({source:r,originalSource:n,sourceContainer:s,sensorEvent:o,dragEvent:e,mirror:this.mirror,passedThreshX:a,passedThreshY:l});this.draggable.trigger(c)}[$](e){if("ontouchstart"in window&&document.removeEventListener("scroll",this[G],!0),this.initialScrollOffset={x:0,y:0},this.scrollOffset={x:0,y:0},!this.mirror)return;const{source:r,sourceContainer:n,sensorEvent:s}=e,o=new Ie({source:r,mirror:this.mirror,sourceContainer:n,sensorEvent:s,dragEvent:e});this.draggable.trigger(o),o.canceled()||this.mirror.remove()}[G](){this.scrollOffset={x:window.scrollX-this.initialScrollOffset.x,y:window.scrollY-this.initialScrollOffset.y}}[k]({mirror:e,source:r,sensorEvent:n}){const s=this.draggable.getClassNamesFor("mirror"),o=({mirrorOffset:l,initialX:c,initialY:d,...u})=>(this.mirrorOffset=l,this.initialX=c,this.initialY=d,this.lastMovedX=c,this.lastMovedY=d,{mirrorOffset:l,initialX:c,initialY:d,...u});e.style.display="none";const a={mirror:e,source:r,sensorEvent:n,mirrorClasses:s,scrollOffset:this.scrollOffset,options:this.options,passedThreshX:!0,passedThreshY:!0};return Promise.resolve(a).then(Tt).then(Ft).then(Mt).then(Nt).then($e({initial:!0})).then(Rt).then(o)}[B](e){if(e.canceled())return null;const r=({lastMovedX:o,lastMovedY:a,...l})=>(this.lastMovedX=o,this.lastMovedY=a,{lastMovedX:o,lastMovedY:a,...l}),n=o=>{const a=new Je({source:e.source,originalSource:e.originalSource,sourceContainer:e.sourceContainer,sensorEvent:e.sensorEvent,dragEvent:e.dragEvent,mirror:this.mirror,passedThreshX:e.passedThreshX,passedThreshY:e.passedThreshY});return this.draggable.trigger(a),o},s={mirror:e.mirror,sensorEvent:e.sensorEvent,mirrorOffset:this.mirrorOffset,options:this.options,initialX:this.initialX,initialY:this.initialY,scrollOffset:this.scrollOffset,passedThreshX:e.passedThreshX,passedThreshY:e.passedThreshY,lastMovedX:this.lastMovedX,lastMovedY:this.lastMovedY};return Promise.resolve(s).then($e({raf:!0})).then(r).then(n)}[_e](e){const r=this.options.appendTo;return typeof r=="string"?document.querySelector(r):r instanceof HTMLElement?r:typeof r=="function"?r(e):e.parentNode}}function Tt({source:t,...e}){return P(r=>{const n=t.getBoundingClientRect();r({source:t,sourceRect:n,...e})})}function Ft({sensorEvent:t,sourceRect:e,options:r,...n}){return P(s=>{const o=r.cursorOffsetY===null?t.clientY-e.top:r.cursorOffsetY,a=r.cursorOffsetX===null?t.clientX-e.left:r.cursorOffsetX;s({sensorEvent:t,sourceRect:e,mirrorOffset:{top:o,left:a},options:r,...n})})}function Mt({mirror:t,source:e,options:r,...n}){return P(s=>{let o,a;if(r.constrainDimensions){const l=getComputedStyle(e);o=l.getPropertyValue("height"),a=l.getPropertyValue("width")}t.style.display=null,t.style.position="fixed",t.style.pointerEvents="none",t.style.top=0,t.style.left=0,t.style.margin=0,r.constrainDimensions&&(t.style.height=o,t.style.width=a),s({mirror:t,source:e,options:r,...n})})}function Nt({mirror:t,mirrorClasses:e,...r}){return P(n=>{t.classList.add(...e),n({mirror:t,mirrorClasses:e,...r})})}function Rt({mirror:t,...e}){return P(r=>{t.removeAttribute("id"),delete t.id,r({mirror:t,...e})})}function $e({withFrame:t=!1,initial:e=!1}={}){return({mirror:r,sensorEvent:n,mirrorOffset:s,initialY:o,initialX:a,scrollOffset:l,options:c,passedThreshX:d,passedThreshY:u,lastMovedX:m,lastMovedY:h,...y})=>P(f=>{const b={mirror:r,sensorEvent:n,mirrorOffset:s,options:c,...y};if(s){const C=d?Math.round((n.clientX-s.left-l.x)/(c.thresholdX||1))*(c.thresholdX||1):Math.round(m),I=u?Math.round((n.clientY-s.top-l.y)/(c.thresholdY||1))*(c.thresholdY||1):Math.round(h);c.xAxis&&c.yAxis||e?r.style.transform=`translate3d(${C}px, ${I}px, 0)`:c.xAxis&&!c.yAxis?r.style.transform=`translate3d(${C}px, ${o}px, 0)`:c.yAxis&&!c.xAxis&&(r.style.transform=`translate3d(${a}px, ${I}px, 0)`),e&&(b.initialX=C,b.initialY=I),b.lastMovedX=C,b.lastMovedY=I}f(b)},{frame:t})}function P(t,{raf:e=!1}={}){return new Promise((r,n)=>{e?requestAnimationFrame(()=>{t(r,n)}):t(r,n)})}function qt(t){return/^drag/.test(t.originalEvent.type)}const z=Symbol("onDragStart"),W=Symbol("onDragMove"),U=Symbol("onDragStop"),j=Symbol("scroll"),Pt={speed:6,sensitivity:50,scrollableElements:[]};class Xt extends ve{constructor(e){super(e),this.options={...Pt,...this.getOptions()},this.currentMousePosition=null,this.scrollAnimationFrame=null,this.scrollableElement=null,this.findScrollableElementFrame=null,this[z]=this[z].bind(this),this[W]=this[W].bind(this),this[U]=this[U].bind(this),this[j]=this[j].bind(this)}attach(){this.draggable.on("drag:start",this[z]).on("drag:move",this[W]).on("drag:stop",this[U])}detach(){this.draggable.off("drag:start",this[z]).off("drag:move",this[W]).off("drag:stop",this[U])}getOptions(){return this.draggable.options.scrollable||{}}getScrollableElement(e){return this.hasDefinedScrollableElements()?S(e,this.options.scrollableElements)||document.documentElement:$t(e)}hasDefinedScrollableElements(){return this.options.scrollableElements.length!==0}[z](e){this.findScrollableElementFrame=requestAnimationFrame(()=>{this.scrollableElement=this.getScrollableElement(e.source)})}[W](e){if(this.findScrollableElementFrame=requestAnimationFrame(()=>{this.scrollableElement=this.getScrollableElement(e.sensorEvent.target)}),!this.scrollableElement)return;const r=e.sensorEvent,n={x:0,y:0};"ontouchstart"in window&&(n.y=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n.x=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),this.currentMousePosition={clientX:r.clientX-n.x,clientY:r.clientY-n.y},this.scrollAnimationFrame=requestAnimationFrame(this[j])}[U](){cancelAnimationFrame(this.scrollAnimationFrame),cancelAnimationFrame(this.findScrollableElementFrame),this.scrollableElement=null,this.scrollAnimationFrame=null,this.findScrollableElementFrame=null,this.currentMousePosition=null}[j](){if(!this.scrollableElement||!this.currentMousePosition)return;cancelAnimationFrame(this.scrollAnimationFrame);const{speed:e,sensitivity:r}=this.options,n=this.scrollableElement.getBoundingClientRect(),s=n.bottom>window.innerHeight,a=n.top<0||s,l=Le(),c=this.scrollableElement,d=this.currentMousePosition.clientX,u=this.currentMousePosition.clientY;if(c!==document.body&&c!==document.documentElement&&!a){const{offsetHeight:m,offsetWidth:h}=c;n.top+m-u<r?c.scrollTop+=e:u-n.top<r&&(c.scrollTop-=e),n.left+h-d<r?c.scrollLeft+=e:d-n.left<r&&(c.scrollLeft-=e)}else{const{innerHeight:m,innerWidth:h}=window;u<r?l.scrollTop-=e:m-u<r&&(l.scrollTop+=e),d<r?l.scrollLeft-=e:h-d<r&&(l.scrollLeft+=e)}this.scrollAnimationFrame=requestAnimationFrame(this[j])}}function Yt(t){const e=/(auto|scroll)/,r=getComputedStyle(t,null),n=r.getPropertyValue("overflow")+r.getPropertyValue("overflow-y")+r.getPropertyValue("overflow-x");return e.test(n)}function _t(t){return getComputedStyle(t).getPropertyValue("position")==="static"}function $t(t){if(!t)return Le();const e=getComputedStyle(t).getPropertyValue("position"),r=e==="absolute",n=S(t,s=>r&&_t(s)?!1:Yt(s));return e==="fixed"||!n?Le():n}function Le(){return document.scrollingElement||document.documentElement}class kt{constructor(){this.callbacks={}}on(e,...r){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(...r),this}off(e,r){if(!this.callbacks[e])return null;const n=this.callbacks[e].slice(0);for(let s=0;s<n.length;s++)r===n[s]&&this.callbacks[e].splice(s,1);return this}trigger(e){if(!this.callbacks[e.type])return null;const r=[...this.callbacks[e.type]],n=[];for(let s=r.length-1;s>=0;s--){const o=r[s];try{o(e)}catch(a){n.push(a)}}return n.length&&console.error(`Draggable caught errors while triggering '${e.type}'`,n),this}}function Qe(t,e,r,n){return Math.sqrt((r-t)**2+(n-e)**2)}const T={mouse:0,drag:0,touch:100};class Ze{constructor(e=[],r={}){this.containers=[...e],this.options={...r},this.dragging=!1,this.currentContainer=null,this.originalSource=null,this.startEvent=null,this.delay=Bt(r.delay)}attach(){return this}detach(){return this}addContainer(...e){this.containers=[...this.containers,...e]}removeContainer(...e){this.containers=this.containers.filter(r=>!e.includes(r))}trigger(e,r){const n=document.createEvent("Event");return n.detail=r,n.initEvent(r.type,!0,!0),e.dispatchEvent(n),this.lastEvent=r,r}}function Bt(t){const e={};if(t===void 0)return{...T};if(typeof t=="number"){for(const r in T)Object.prototype.hasOwnProperty.call(T,r)&&(e[r]=t);return e}for(const r in T)Object.prototype.hasOwnProperty.call(T,r)&&(t[r]===void 0?e[r]=T[r]:e[r]=t[r]);return e}class be extends D{get originalEvent(){return this.data.originalEvent}get clientX(){return this.data.clientX}get clientY(){return this.data.clientY}get target(){return this.data.target}get container(){return this.data.container}get originalSource(){return this.data.originalSource}get pressure(){return this.data.pressure}}class Oe extends be{}Oe.type="drag:start";class Te extends be{}Te.type="drag:move";class Fe extends be{}Fe.type="drag:stop";class Gt extends be{}Gt.type="drag:pressure";const V=Symbol("onContextMenuWhileDragging"),H=Symbol("onMouseDown"),K=Symbol("onMouseMove"),J=Symbol("onMouseUp"),he=Symbol("startDrag"),E=Symbol("onDistanceChange");class zt extends Ze{constructor(e=[],r={}){super(e,r),this.mouseDownTimeout=null,this.pageX=null,this.pageY=null,this[V]=this[V].bind(this),this[H]=this[H].bind(this),this[K]=this[K].bind(this),this[J]=this[J].bind(this),this[he]=this[he].bind(this),this[E]=this[E].bind(this)}attach(){document.addEventListener("mousedown",this[H],!0)}detach(){document.removeEventListener("mousedown",this[H],!0)}[H](e){if(e.button!==0||e.ctrlKey||e.metaKey)return;const r=S(e.target,this.containers);if(!r||this.options.handle&&e.target&&!S(e.target,this.options.handle))return;const n=S(e.target,this.options.draggable);if(!n)return;const{delay:s}=this,{pageX:o,pageY:a}=e;Object.assign(this,{pageX:o,pageY:a}),this.onMouseDownAt=Date.now(),this.startEvent=e,this.currentContainer=r,this.originalSource=n,document.addEventListener("mouseup",this[J]),document.addEventListener("dragstart",ke),document.addEventListener("mousemove",this[E]),this.mouseDownTimeout=window.setTimeout(()=>{this[E]({pageX:this.pageX,pageY:this.pageY})},s.mouse)}[he](){const e=this.startEvent,r=this.currentContainer,n=this.originalSource,s=new Oe({clientX:e.clientX,clientY:e.clientY,target:e.target,container:r,originalSource:n,originalEvent:e});this.trigger(this.currentContainer,s),this.dragging=!s.canceled(),this.dragging&&(document.addEventListener("contextmenu",this[V],!0),document.addEventListener("mousemove",this[K]))}[E](e){const{pageX:r,pageY:n}=e,{distance:s}=this.options,{startEvent:o,delay:a}=this;if(Object.assign(this,{pageX:r,pageY:n}),!this.currentContainer)return;const l=Date.now()-this.onMouseDownAt,c=Qe(o.pageX,o.pageY,r,n)||0;clearTimeout(this.mouseDownTimeout),l<a.mouse?document.removeEventListener("mousemove",this[E]):c>=s&&(document.removeEventListener("mousemove",this[E]),this[he]())}[K](e){if(!this.dragging)return;const r=document.elementFromPoint(e.clientX,e.clientY),n=new Te({clientX:e.clientX,clientY:e.clientY,target:r,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,n)}[J](e){if(clearTimeout(this.mouseDownTimeout),e.button!==0||(document.removeEventListener("mouseup",this[J]),document.removeEventListener("dragstart",ke),document.removeEventListener("mousemove",this[E]),!this.dragging))return;const r=document.elementFromPoint(e.clientX,e.clientY),n=new Fe({clientX:e.clientX,clientY:e.clientY,target:r,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,n),document.removeEventListener("contextmenu",this[V],!0),document.removeEventListener("mousemove",this[K]),this.currentContainer=null,this.dragging=!1,this.startEvent=null}[V](e){e.preventDefault()}}function ke(t){t.preventDefault()}function F(t){const{touches:e,changedTouches:r}=t;return e&&e[0]||r&&r[0]}const Q=Symbol("onTouchStart"),x=Symbol("onTouchEnd"),Z=Symbol("onTouchMove"),ge=Symbol("startDrag"),w=Symbol("onDistanceChange");let pe=!1;window.addEventListener("touchmove",t=>{pe&&t.preventDefault()},{passive:!1});class Wt extends Ze{constructor(e=[],r={}){super(e,r),this.currentScrollableParent=null,this.tapTimeout=null,this.touchMoved=!1,this.pageX=null,this.pageY=null,this[Q]=this[Q].bind(this),this[x]=this[x].bind(this),this[Z]=this[Z].bind(this),this[ge]=this[ge].bind(this),this[w]=this[w].bind(this)}attach(){document.addEventListener("touchstart",this[Q])}detach(){document.removeEventListener("touchstart",this[Q])}[Q](e){const r=S(e.target,this.containers);if(!r||this.options.handle&&e.target&&!S(e.target,this.options.handle))return;const n=S(e.target,this.options.draggable);if(!n)return;const{distance:s=0}=this.options,{delay:o}=this,{pageX:a,pageY:l}=F(e);Object.assign(this,{pageX:a,pageY:l}),this.onTouchStartAt=Date.now(),this.startEvent=e,this.currentContainer=r,this.originalSource=n,document.addEventListener("touchend",this[x]),document.addEventListener("touchcancel",this[x]),document.addEventListener("touchmove",this[w]),r.addEventListener("contextmenu",Be),s&&(pe=!0),this.tapTimeout=window.setTimeout(()=>{this[w]({touches:[{pageX:this.pageX,pageY:this.pageY}]})},o.touch)}[ge](){const e=this.startEvent,r=this.currentContainer,n=F(e),s=this.originalSource,o=new Oe({clientX:n.pageX,clientY:n.pageY,target:e.target,container:r,originalSource:s,originalEvent:e});this.trigger(this.currentContainer,o),this.dragging=!o.canceled(),this.dragging&&document.addEventListener("touchmove",this[Z]),pe=this.dragging}[w](e){const{distance:r}=this.options,{startEvent:n,delay:s}=this,o=F(n),a=F(e),l=Date.now()-this.onTouchStartAt,c=Qe(o.pageX,o.pageY,a.pageX,a.pageY);Object.assign(this,a),clearTimeout(this.tapTimeout),l<s.touch?document.removeEventListener("touchmove",this[w]):c>=r&&(document.removeEventListener("touchmove",this[w]),this[ge]())}[Z](e){if(!this.dragging)return;const{pageX:r,pageY:n}=F(e),s=document.elementFromPoint(r-window.scrollX,n-window.scrollY),o=new Te({clientX:r,clientY:n,target:s,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,o)}[x](e){if(clearTimeout(this.tapTimeout),pe=!1,document.removeEventListener("touchend",this[x]),document.removeEventListener("touchcancel",this[x]),document.removeEventListener("touchmove",this[w]),this.currentContainer&&this.currentContainer.removeEventListener("contextmenu",Be),!this.dragging)return;document.removeEventListener("touchmove",this[Z]);const{pageX:r,pageY:n}=F(e),s=document.elementFromPoint(r-window.scrollX,n-window.scrollY);e.preventDefault();const o=new Fe({clientX:r,clientY:n,target:s,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,o),this.currentContainer=null,this.dragging=!1,this.startEvent=null}}function Be(t){t.preventDefault(),t.stopPropagation()}class Me extends D{get draggable(){return this.data.draggable}}Me.type="draggable";class et extends Me{}et.type="draggable:initialize";class tt extends Me{}tt.type="draggable:destroy";class v extends D{constructor(e){super(e),this.data=e}get source(){return this.data.source}get originalSource(){return this.data.originalSource}get mirror(){return this.data.mirror}get sourceContainer(){return this.data.sourceContainer}get sensorEvent(){return this.data.sensorEvent}get originalEvent(){return this.sensorEvent?this.sensorEvent.originalEvent:null}}v.type="drag";class Ne extends v{}Ne.type="drag:start";Ne.cancelable=!0;class rt extends v{}rt.type="drag:move";class Re extends v{get overContainer(){return this.data.overContainer}get over(){return this.data.over}}Re.type="drag:over";Re.cancelable=!0;class nt extends v{get overContainer(){return this.data.overContainer}get over(){return this.data.over}}nt.type="drag:out";class st extends v{get overContainer(){return this.data.overContainer}}st.type="drag:over:container";class ot extends v{get overContainer(){return this.data.overContainer}}ot.type="drag:out:container";class it extends v{get pressure(){return this.data.pressure}}it.type="drag:pressure";class qe extends v{}qe.type="drag:stop";qe.cancelable=!0;class at extends v{}at.type="drag:stopped";const ee=Symbol("onDragStart"),M=Symbol("onDragMove"),te=Symbol("onDragStop"),re=Symbol("onDragPressure"),ne=Symbol("dragStop"),Ut={"drag:start":t=>`Picked up ${t.source.textContent.trim()||t.source.id||"draggable element"}`,"drag:stop":t=>`Released ${t.source.textContent.trim()||t.source.id||"draggable element"}`},jt={"container:dragging":"draggable-container--is-dragging","source:dragging":"draggable-source--is-dragging","source:placed":"draggable-source--placed","container:placed":"draggable-container--placed","body:dragging":"draggable--is-dragging","draggable:over":"draggable--over","container:over":"draggable-container--over","source:original":"draggable--original",mirror:"draggable-mirror"},Vt={draggable:".draggable-source",handle:null,delay:{},distance:0,placedTimeout:800,plugins:[],sensors:[],exclude:{plugins:[],sensors:[]}};class R{constructor(e=[document.body],r={}){if(e instanceof NodeList||e instanceof Array)this.containers=[...e];else if(e instanceof HTMLElement)this.containers=[e];else throw new Error("Draggable containers are expected to be of type `NodeList`, `HTMLElement[]` or `HTMLElement`");this.options={...Vt,...r,classes:{...jt,...r.classes||{}},announcements:{...Ut,...r.announcements||{}},exclude:{plugins:r.exclude&&r.exclude.plugins||[],sensors:r.exclude&&r.exclude.sensors||[]}},this.emitter=new kt,this.dragging=!1,this.plugins=[],this.sensors=[],this[ee]=this[ee].bind(this),this[M]=this[M].bind(this),this[te]=this[te].bind(this),this[re]=this[re].bind(this),this[ne]=this[ne].bind(this),document.addEventListener("drag:start",this[ee],!0),document.addEventListener("drag:move",this[M],!0),document.addEventListener("drag:stop",this[te],!0),document.addEventListener("drag:pressure",this[re],!0);const n=Object.values(R.Plugins).filter(a=>!this.options.exclude.plugins.includes(a)),s=Object.values(R.Sensors).filter(a=>!this.options.exclude.sensors.includes(a));this.addPlugin(...n,...this.options.plugins),this.addSensor(...s,...this.options.sensors);const o=new et({draggable:this});this.on("mirror:created",({mirror:a})=>this.mirror=a),this.on("mirror:destroy",()=>this.mirror=null),this.trigger(o)}destroy(){document.removeEventListener("drag:start",this[ee],!0),document.removeEventListener("drag:move",this[M],!0),document.removeEventListener("drag:stop",this[te],!0),document.removeEventListener("drag:pressure",this[re],!0);const e=new tt({draggable:this});this.trigger(e),this.removePlugin(...this.plugins.map(r=>r.constructor)),this.removeSensor(...this.sensors.map(r=>r.constructor))}addPlugin(...e){const r=e.map(n=>new n(this));return r.forEach(n=>n.attach()),this.plugins=[...this.plugins,...r],this}removePlugin(...e){return this.plugins.filter(n=>e.includes(n.constructor)).forEach(n=>n.detach()),this.plugins=this.plugins.filter(n=>!e.includes(n.constructor)),this}addSensor(...e){const r=e.map(n=>new n(this.containers,this.options));return r.forEach(n=>n.attach()),this.sensors=[...this.sensors,...r],this}removeSensor(...e){return this.sensors.filter(n=>e.includes(n.constructor)).forEach(n=>n.detach()),this.sensors=this.sensors.filter(n=>!e.includes(n.constructor)),this}addContainer(...e){return this.containers=[...this.containers,...e],this.sensors.forEach(r=>r.addContainer(...e)),this}removeContainer(...e){return this.containers=this.containers.filter(r=>!e.includes(r)),this.sensors.forEach(r=>r.removeContainer(...e)),this}on(e,...r){return this.emitter.on(e,...r),this}off(e,r){return this.emitter.off(e,r),this}trigger(e){return this.emitter.trigger(e),this}getClassNameFor(e){return this.getClassNamesFor(e)[0]}getClassNamesFor(e){const r=this.options.classes[e];return r instanceof Array?r:typeof r=="string"||r instanceof String?[r]:[]}isDragging(){return!!this.dragging}getDraggableElements(){return this.containers.reduce((e,r)=>[...e,...this.getDraggableElementsForContainer(r)],[])}getDraggableElementsForContainer(e){return[...e.querySelectorAll(this.options.draggable)].filter(n=>n!==this.originalSource&&n!==this.mirror)}cancel(){this[ne]()}[ee](e){const r=me(e),{target:n,container:s,originalSource:o}=r;if(!this.containers.includes(s))return;if(this.options.handle&&n&&!S(n,this.options.handle)){r.cancel();return}this.originalSource=o,this.sourceContainer=s,this.lastPlacedSource&&this.lastPlacedContainer&&(clearTimeout(this.placedTimeoutID),this.lastPlacedSource.classList.remove(...this.getClassNamesFor("source:placed")),this.lastPlacedContainer.classList.remove(...this.getClassNamesFor("container:placed"))),this.source=this.originalSource.cloneNode(!0),this.originalSource.parentNode.insertBefore(this.source,this.originalSource),this.originalSource.style.display="none";const a=new Ne({source:this.source,originalSource:this.originalSource,sourceContainer:s,sensorEvent:r});if(this.trigger(a),this.dragging=!a.canceled(),a.canceled()){this.source.remove(),this.originalSource.style.display=null;return}this.originalSource.classList.add(...this.getClassNamesFor("source:original")),this.source.classList.add(...this.getClassNamesFor("source:dragging")),this.sourceContainer.classList.add(...this.getClassNamesFor("container:dragging")),document.body.classList.add(...this.getClassNamesFor("body:dragging")),Ge(document.body,"none"),requestAnimationFrame(()=>{const c=me(e).clone({target:this.source});this[M]({...e,detail:c})})}[M](e){if(!this.dragging)return;const r=me(e),{container:n}=r;let s=r.target;const o=new rt({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:r});this.trigger(o),o.canceled()&&r.cancel(),s=S(s,this.options.draggable);const a=S(r.target,this.containers),l=r.overContainer||a,c=this.currentOverContainer&&l!==this.currentOverContainer,d=this.currentOver&&s!==this.currentOver,u=l&&this.currentOverContainer!==l,m=a&&s&&this.currentOver!==s;if(d){const h=new nt({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:r,over:this.currentOver,overContainer:this.currentOverContainer});this.currentOver.classList.remove(...this.getClassNamesFor("draggable:over")),this.currentOver=null,this.trigger(h)}if(c){const h=new ot({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:r,overContainer:this.currentOverContainer});this.currentOverContainer.classList.remove(...this.getClassNamesFor("container:over")),this.currentOverContainer=null,this.trigger(h)}if(u){l.classList.add(...this.getClassNamesFor("container:over"));const h=new st({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:r,overContainer:l});this.currentOverContainer=l,this.trigger(h)}if(m){s.classList.add(...this.getClassNamesFor("draggable:over"));const h=new Re({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:r,overContainer:l,over:s});this.currentOver=s,this.trigger(h)}}[ne](e){if(!this.dragging)return;this.dragging=!1;const r=new qe({source:this.source,originalSource:this.originalSource,sensorEvent:e?e.sensorEvent:null,sourceContainer:this.sourceContainer});this.trigger(r),r.canceled()||this.source.parentNode.insertBefore(this.originalSource,this.source),this.source.remove(),this.originalSource.style.display="",this.source.classList.remove(...this.getClassNamesFor("source:dragging")),this.originalSource.classList.remove(...this.getClassNamesFor("source:original")),this.originalSource.classList.add(...this.getClassNamesFor("source:placed")),this.sourceContainer.classList.add(...this.getClassNamesFor("container:placed")),this.sourceContainer.classList.remove(...this.getClassNamesFor("container:dragging")),document.body.classList.remove(...this.getClassNamesFor("body:dragging")),Ge(document.body,""),this.currentOver&&this.currentOver.classList.remove(...this.getClassNamesFor("draggable:over")),this.currentOverContainer&&this.currentOverContainer.classList.remove(...this.getClassNamesFor("container:over")),this.lastPlacedSource=this.originalSource,this.lastPlacedContainer=this.sourceContainer,this.placedTimeoutID=setTimeout(()=>{this.lastPlacedSource&&this.lastPlacedSource.classList.remove(...this.getClassNamesFor("source:placed")),this.lastPlacedContainer&&this.lastPlacedContainer.classList.remove(...this.getClassNamesFor("container:placed")),this.lastPlacedSource=null,this.lastPlacedContainer=null},this.options.placedTimeout);const n=new at({source:this.source,originalSource:this.originalSource,sensorEvent:e?e.sensorEvent:null,sourceContainer:this.sourceContainer});this.trigger(n),this.source=null,this.originalSource=null,this.currentOverContainer=null,this.currentOver=null,this.sourceContainer=null}[te](e){this[ne](e)}[re](e){if(!this.dragging)return;const r=me(e),n=this.source||S(r.originalEvent.target,this.options.draggable),s=new it({sensorEvent:r,source:n,pressure:r.pressure});this.trigger(s)}}R.Plugins={Announcement:Et,Focusable:Lt,Mirror:Ot,Scrollable:Xt};R.Sensors={MouseSensor:zt,TouchSensor:Wt};function me(t){return t.detail}function Ge(t,e){t.style.webkitUserSelect=e,t.style.mozUserSelect=e,t.style.msUserSelect=e,t.style.oUserSelect=e,t.style.userSelect=e}class ce extends D{constructor(e){super(e),this.data=e}get dragEvent(){return this.data.dragEvent}}ce.type="sortable";class Pe extends ce{get startIndex(){return this.data.startIndex}get startContainer(){return this.data.startContainer}}Pe.type="sortable:start";Pe.cancelable=!0;class Se extends ce{get currentIndex(){return this.data.currentIndex}get over(){return this.data.over}get overContainer(){return this.data.dragEvent.overContainer}}Se.type="sortable:sort";Se.cancelable=!0;class Ae extends ce{get oldIndex(){return this.data.oldIndex}get newIndex(){return this.data.newIndex}get oldContainer(){return this.data.oldContainer}get newContainer(){return this.data.newContainer}}Ae.type="sortable:sorted";class lt extends ce{get oldIndex(){return this.data.oldIndex}get newIndex(){return this.data.newIndex}get oldContainer(){return this.data.oldContainer}get newContainer(){return this.data.newContainer}}lt.type="sortable:stop";const se=Symbol("onDragStart"),oe=Symbol("onDragOverContainer"),ie=Symbol("onDragOver"),ae=Symbol("onDragStop");function Ht({dragEvent:t}){const e=t.source.textContent.trim()||t.source.id||"sortable element";if(t.over){const r=t.over.textContent.trim()||t.over.id||"sortable element";return t.source.compareDocumentPosition(t.over)&Node.DOCUMENT_POSITION_FOLLOWING?`Placed ${e} after ${r}`:`Placed ${e} before ${r}`}else return`Placed ${e} into a different container`}const Kt={"sortable:sorted":Ht};class Jt extends R{constructor(e=[],r={}){super(e,{...r,announcements:{...Kt,...r.announcements||{}}}),this.startIndex=null,this.startContainer=null,this[se]=this[se].bind(this),this[oe]=this[oe].bind(this),this[ie]=this[ie].bind(this),this[ae]=this[ae].bind(this),this.on("drag:start",this[se]).on("drag:over:container",this[oe]).on("drag:over",this[ie]).on("drag:stop",this[ae])}destroy(){super.destroy(),this.off("drag:start",this[se]).off("drag:over:container",this[oe]).off("drag:over",this[ie]).off("drag:stop",this[ae])}index(e){return this.getSortableElementsForContainer(e.parentNode).indexOf(e)}getSortableElementsForContainer(e){return[...e.querySelectorAll(this.options.draggable)].filter(n=>n!==this.originalSource&&n!==this.mirror&&n.parentNode===e)}[se](e){this.startContainer=e.source.parentNode,this.startIndex=this.index(e.source);const r=new Pe({dragEvent:e,startIndex:this.startIndex,startContainer:this.startContainer});this.trigger(r),r.canceled()&&e.cancel()}[oe](e){if(e.canceled())return;const{source:r,over:n,overContainer:s}=e,o=this.index(r),a=new Se({dragEvent:e,currentIndex:o,source:r,over:n});if(this.trigger(a),a.canceled())return;const l=this.getSortableElementsForContainer(s),c=We({source:r,over:n,overContainer:s,children:l});if(!c)return;const{oldContainer:d,newContainer:u}=c,m=this.index(e.source),h=new Ae({dragEvent:e,oldIndex:o,newIndex:m,oldContainer:d,newContainer:u});this.trigger(h)}[ie](e){if(e.over===e.originalSource||e.over===e.source)return;const{source:r,over:n,overContainer:s}=e,o=this.index(r),a=new Se({dragEvent:e,currentIndex:o,source:r,over:n});if(this.trigger(a),a.canceled())return;const l=this.getDraggableElementsForContainer(s),c=We({source:r,over:n,overContainer:s,children:l});if(!c)return;const{oldContainer:d,newContainer:u}=c,m=this.index(r),h=new Ae({dragEvent:e,oldIndex:o,newIndex:m,oldContainer:d,newContainer:u});this.trigger(h)}[ae](e){const r=new lt({dragEvent:e,oldIndex:this.startIndex,newIndex:this.index(e.source),oldContainer:this.startContainer,newContainer:e.source.parentNode});this.trigger(r),this.startIndex=null,this.startContainer=null}}function ze(t){return Array.prototype.indexOf.call(t.parentNode.children,t)}function We({source:t,over:e,overContainer:r,children:n}){const s=!n.length,o=t.parentNode!==r,a=e&&t.parentNode===e.parentNode;return s?Qt(t,r):a?Zt(t,e):o?er(t,e,r):null}function Qt(t,e){const r=t.parentNode;return e.appendChild(t),{oldContainer:r,newContainer:e}}function Zt(t,e){const r=ze(t),n=ze(e);return r<n?t.parentNode.insertBefore(t,e.nextElementSibling):t.parentNode.insertBefore(t,e),{oldContainer:t.parentNode,newContainer:t.parentNode}}function er(t,e,r){const n=t.parentNode;return e?e.parentNode.insertBefore(t,e):r.appendChild(t),{oldContainer:n,newContainer:t.parentNode}}const i={itemSelector:"[data-repeated-field-item]",singleItemSelector:'[data-repeated-field-item=":id"]',rowsSelector:"[data-repeated-field-rows]",rowSelector:"[data-repeated-field-row]",rowIterationSelector:"[data-repeated-field-row-iteration]",rowIterationLabelSelector:"[data-repeated-field-row-iteration-label]",rowContentSelector:"[data-repeated-field-row-content]",templateSelector:"[data-repeated-field-template]",addRowSelector:"[data-repeated-field-add-row]",handleRowSelector:"[data-repeated-field-handle-row]",collapseRowSelector:"[data-repeated-field-collapse-row]",removeRowSelector:"[data-repeated-field-remove-row]",emptyInputSelector:"[data-repeated-field-empty-input]",formGroupSelector:"[data-form-group]",imageWrapperSelector:"[data-image-wrapper]",findContainer:t=>document.querySelector(i.singleItemSelector.replace(":id",t)),getRowsElement:t=>t.querySelector(i.rowsSelector),getRowsCount:t=>i.getRowsElement(t).children.length,getMaxRow:t=>{const e=Number(t.dataset.maxRow);return e===-1?1/0:e},getIndexOfRow(t){const e=t.closest(i.rowsSelector);return Array.from(e.children).indexOf(t)},getLastIndexOfRow(t){const e=t.closest(i.rowsSelector);return Number(e.getAttribute("data-last-row-index"))},parseName(t,e,r={}){const n=t.closest(i.itemSelector);let s=Number(t.getAttribute("data-row-index"));r.indexByDomOrder&&(s=i.getIndexOfRow(t)),r.selectedRowIndex===void 0&&(r.selectedRowIndex=s),r.dottedName||(r.dottedName=t.querySelector(`[data-form-field-key="${e}"]`).dataset.originalFormGroup),r.dottedName=r.dottedName.replace(/(.*)(\*.*)/,(c,d,u)=>d+u.replace(/\*/,s));const o=ut(r.dottedName),a=dt(o),l=n.closest(i.rowSelector);return l?i.parseName(l,e,r):{id:a,key:e,index:r.selectedRowIndex,computedName:o,dottedName:r.dottedName}},getTemplate:t=>{const e=t.querySelectorAll(i.templateSelector);return e[e.length-1]},addRow:t=>{const e=typeof t.itemContainer=="string"?i.findContainer(t.itemContainer):t.itemContainer,r=i.getRowsElement(e),n=i.getMaxRow(e);if(i.getRowsCount(e)>=n)return;const o=i.getTemplate(e).cloneNode(!0).content.children[0];r.appendChild(o),i.onAddRow(o,t),i.getRowsCount(e)>=n&&i.disableAddRowButton(e),Object.keys((t==null?void 0:t.fields)||{}).forEach(a=>{var c;const l=(c=t==null?void 0:t.fields)==null?void 0:c[a];Array.isArray(l)&&l.forEach((d,u)=>{const h=e.querySelectorAll(i.singleItemSelector.replace(":id",`${t==null?void 0:t.dottedName}.*.${a}`))[t.index];i.addRow({itemContainer:h,fields:d,errors:t==null?void 0:t.errors,dottedName:`${t==null?void 0:t.dottedName}.*.${a}`,index:u})})})},removeRow:t=>{t.preventDefault();const e=t.target.closest(i.itemSelector),r=e.dataset.repeatedFieldItem,n=t.target.closest(i.rowsSelector);n.children.length<=1&&n.classList.add("fd-hidden"),i.enableAddRowButton(r);const s=t.target.closest(i.rowSelector),{dottedName:o}=i.parseName(s.parentElement.closest(i.rowSelector)||s,void 0,{dottedName:r});i.addToRemoveList(e,`${o}.${Number(s.getAttribute("data-row-index"))}`),s.remove(),i.resetRowIndexes(n)},setRowIndexes:(t,e)=>{if(e.mode==="add"){const r=t.closest(i.rowsSelector);let n=0;r.hasAttribute("data-last-row-index")&&(n=Number(r.getAttribute("data-last-row-index"))+1),r.setAttribute("data-last-row-index",n),t.setAttribute("data-row-index",n),i.setRowInputs(t,e),i.prepareConditionalFields(t),Ee.listen(t)}i.setIteration(t,e)},setRowInputs:(t,e)=>{t.querySelectorAll("[name]").forEach(r=>{var u,m,h;const n=r.closest(i.formGroupSelector),{id:s,key:o,computedName:a,dottedName:l}=i.parseName(t,n.dataset.formFieldKey),c=n.querySelector("label");c&&c.setAttribute("for",s),n.dataset.formGroup=l,r.setAttribute("name",a),r.setAttribute("id",s);const d=((u=e==null?void 0:e.fields)==null?void 0:u[o])||"";if(d){r.setAttribute("value",d),(m=r==null?void 0:r._CKEDITOR)==null||m.then(f=>{f.setData(d)});const y=n.querySelector(i.imageWrapperSelector);if(y){const f=document.createElement("img");f.classList.add("fd-w-full","fd-h-full","fd-object-cover"),f.setAttribute("src",d),f.setAttribute("alt","Uploaded image"),y.append(f)}if(r.tagName==="SELECT"){const f=r.querySelector(`option[value="${d}"]`);f==null||f.setAttribute("selected","selected")}if(r.type==="checkbox"&&(d==="0"||d==="false"?r.checked=!1:r.checked=!!d),r.type==="file"){const f=document.querySelector(g.fileDefaultTemplateSelector);r.after(f.cloneNode(!0).content);const b=n.querySelector(g.fileInfoSelector),C=b.querySelector("a"),I=b.querySelector(g.deleteFileSelector);C.setAttribute("href",d),C.textContent=d,I.addEventListener("click",()=>{g.onRemoveFile(b)})}}if((h=e==null?void 0:e.errors)!=null&&h[l]&&!n.classList.contains("fd-has-error")){n.classList.add("fd-has-error");const y=document.createElement("span");y.classList.add("fd-text-xs","fd-text-red-500"),y.innerText=e.errors[l][0],r.parentNode.parentNode.appendChild(y)}})},resetRowIndexes:(t,e="reset")=>{t.querySelectorAll(i.rowSelector).forEach(r=>{i.setRowIndexes(r,{mode:e})})},onAddRow:(t,e)=>{i.initPluginsBeforeSetRowIndexes(t),i.setRowIndexes(t,{...e,mode:"add"}),i.initPluginsAfterSetRowIndexes(t,e)},initPluginsBeforeSetRowIndexes:t=>{t.querySelectorAll(N.selector).forEach(r=>{N.init(r)}),t.querySelectorAll(g.imageSelector).forEach(r=>{g.handleImageInput(r.querySelector('input[type="file"]'))});const e=t.querySelectorAll("[data-code-editor]");e.length>0&&Ue(()=>import("./code-editor-a98523db.js").then(r=>r.c),["assets/code-editor-a98523db.js","assets/preload-helper-edc1b5d6.js","assets/code-editor-ad044914.css"]).then(r=>{e.forEach(n=>{n._MONACO_EDITOR||r.default.createEditor(n)})})},initPluginsAfterSetRowIndexes:(t,e)=>{if(t.querySelectorAll(g.checkboxSelector).forEach(r=>{g.handleCheckbox(r)}),i.highlightRowIfError(t,e),i.listenCollapseRowButton(t),i.listenRemoveRowButton(t),i.removeEmptyInputIfNoRows(t.closest(i.rowsSelector)),(e==null?void 0:e.collapse)===!1){const r=t.querySelector(i.collapseRowSelector);i.handleCollapseRowButton(r)}},listenRemoveRowButton:t=>{t.querySelector(i.removeRowSelector).addEventListener("click",i.removeRow)},highlightRowIfError:(t,e,r=!1)=>{var s,o,a,l;if(!(e!=null&&e.errors)||!t)return;if(r){t.classList.add("fd-border","fd-border-red-500"),(o=(s=t.querySelector(i.rowIterationSelector))==null?void 0:s.classList)==null||o.add("fd-text-red-500"),(l=(a=t.querySelector(i.rowIterationLabelSelector))==null?void 0:a.classList)==null||l.add("fd-text-red-500");return}t.querySelectorAll(i.formGroupSelector).forEach(c=>{const{dottedName:d}=i.parseName(t,c.dataset.formFieldKey);e.errors[d]&&(i.highlightRowIfError(t,e,!0),i.highlightRowIfError(t.parentElement.closest(i.rowSelector),e,!0))})},listenCollapseRowButton:t=>{const e=t.querySelector(i.collapseRowSelector);e==null||e.addEventListener("click",r=>{r.preventDefault(),i.handleCollapseRowButton(e)})},handleCollapseRowButton:t=>{const r=t.closest(i.rowSelector).querySelector(i.rowContentSelector);r.classList.contains("fd-hidden")?(r.classList.remove("fd-hidden"),t.style.transform="rotate(90deg)"):(r.classList.add("fd-hidden"),t.style.transform="rotate(0deg)")},enableAddRowButton:t=>{i.findContainer(t).querySelector(i.addRowSelector).removeAttribute("disabled")},disableAddRowButton:t=>{t.querySelector(i.addRowSelector).setAttribute("disabled","disabled")},addToRemoveList:(t,e)=>{const r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name","_deleted_fields[]"),r.setAttribute("value",e),t.appendChild(r)},reorderRows:t=>{t.querySelectorAll("[name]").forEach(e=>{const r=e.closest(i.rowSelector),n=e.closest(i.formGroupSelector),s=t.closest(i.itemSelector),{dottedName:o}=i.parseName(r,n.dataset.formFieldKey,{indexByDomOrder:!0}),a=n.dataset.formGroup,l=o;if(a===l){const d=s.querySelector(`input[name="_reordered_fields[${a}]"]`);d==null||d.remove();return}const c=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name",`_reordered_fields[${a}]`),c.setAttribute("value",l),s.appendChild(c)})},removeEmptyInputIfNoRows:t=>{t.children.length<=0||(t.classList.remove("fd-hidden"),i.removeEmptyInput(t.closest(i.itemSelector).dataset.repeatedFieldItem))},addEmptyInput:t=>{const e=i.findContainer(t),r=document.createElement("input"),n=i.emptyInputSelector.replace(/\[|]/g,"");r.setAttribute("type","hidden"),r.setAttribute("name",e.dataset.repeatedFieldItem),r.setAttribute(n,n),e.appendChild(r)},removeEmptyInput:t=>{const r=i.findContainer(t).querySelector(i.emptyInputSelector);r==null||r.remove()},initializeSortable:t=>{const e=t.querySelector(i.rowsSelector),r=new Jt(e,{draggable:i.rowSelector,handle:i.handleRowSelector,mirror:{constrainDimensions:!0}});r.on("sortable:sort",n=>{const s=n.dragEvent.data.originalSource,o=n.dragEvent.data.over;(s==null?void 0:s.parentElement)!==(o==null?void 0:o.parentElement)&&n.cancel()}),r.on("sortable:stop",n=>{setTimeout(()=>{const o=n.dragEvent.data.originalSource.closest(i.rowsSelector);i.reorderRows(o),i.resetRowIndexes(o,"sort")},250)})},prepareConditionalFields:t=>{t.querySelectorAll(Ee.containerSelector).forEach(e=>{const n=Ee.parseConditions(e).map(s=>{const{id:o}=i.parseName(t,s.key);return{...s,key:o}});e.dataset.conditionalFieldItem=JSON.stringify(n)})},setIteration:(t,e)=>{t.querySelectorAll(i.rowIterationSelector).forEach(r=>{r.innerText=`${i.getIndexOfRow(t)+1}.`}),e.mode==="add"&&t.querySelectorAll(i.rowIterationLabelSelector).forEach(r=>{const n=fe.findFirstFormGroupForIterationLabel(t);n&&(fe.handleImageField(n,r)||fe.handleTextField(n,r)||fe.handleSelectField(n,r))})}},fe={findFirstFormGroupForIterationLabel:t=>{const e=t.querySelectorAll(i.formGroupSelector),r=Array.from(e).filter(n=>!n.querySelector('input[type="checkbox"]')&&!n.querySelector('input[type="radio"]')&&!n.hasAttribute("hidden"));return r==null?void 0:r[0]},handleImageField:(t,e)=>{var a;const r=t.querySelector(i.imageWrapperSelector);if(!r)return;const n=t.querySelector('input[type="file"]');if(!n)return;const s=r.querySelector("img");(a=e.querySelector("img"))==null||a.remove();const o=document.createElement("img");return o.classList.add("fd-w-12","fd-h-12","fd-border","fd-rounded-lg","fd-object-cover"),o.setAttribute("src",(s==null?void 0:s.src)||""),o.setAttribute("alt","Uploaded image"),s?o.classList.remove("fd-hidden"):o.classList.add("fd-hidden"),e.innerHTML="",e.append(o),n==null||n.addEventListener("image:loaded",({detail:l})=>{o.classList.remove("fd-hidden"),o.setAttribute("src",l.imgElem.src)}),!0},handleTextField:(t,e)=>{const r=t.querySelector('input[name]:not([type="checkbox"]):not([type="radio"]):not([type="file"]), textarea[name]');if(!r)return;const n=s=>{e.textContent=s.length>20?s.substring(0,20)+"...":s};return n(r.value),r.addEventListener("input",()=>{n(r.value)}),!0},handleSelectField:(t,e)=>{const r=t.querySelector("select[name]");if(!r)return;const n=s=>{const o=r.querySelector(`option[value="${s}"]`);e.textContent=o==null?void 0:o.textContent};return n(r.value),r.addEventListener("change",s=>{n(s.target.value)}),!0}};document.querySelectorAll(i.itemSelector).forEach(i.initializeSortable);document.addEventListener("click",t=>{const e=t.target.closest(i.addRowSelector);if(!e)return;t.preventDefault();const r=e.closest(i.itemSelector);i.addRow({itemContainer:r,collapse:!1})});window.Feadmin.RepeatedField=i;const g={imageSelector:"[data-form-image]",formGroupSelector:"[data-form-group]",checkboxSelector:'input[type="checkbox"]',deleteFileSelector:"[data-delete-file]",fileInfoSelector:"[data-file-info]",fileDefaultTemplateSelector:"[data-file-default-template]",handleSubmitters:t=>{t.querySelectorAll('[type="submit"]').forEach(r=>{r.classList.add("btn--loading"),r.disabled=!0})},handleSingleSubmitter:t=>{t.classList.add("btn--loading"),t.disabled=!0},handleImageInput:t=>{const e=t.closest(g.imageSelector),r=()=>{const n=new FileReader,s=t.files[0];n.readAsDataURL(s),s.type.match("image.*")||window.Feadmin.Toastr.add("Please select an image file."),n.onload=()=>{let o=e.querySelector("[data-image-wrapper] > img");if(o||(o=document.createElement("img"),o.classList.add("fd-w-full","fd-h-full","fd-object-cover")),o.src=n.result,e.querySelector("[data-image-wrapper]").appendChild(o),!s.type.match("image.*"))o.remove();else{const a=new CustomEvent("image:loaded",{detail:{file:s,imgElem:o}});t.dispatchEvent(a)}}};return t.addEventListener("change",r),{destroy:()=>{t.removeEventListener("change",r)}}},handleCheckbox:t=>{var r;const e=(r=t==null?void 0:t.closest(g.formGroupSelector))==null?void 0:r.querySelector('input[type="hidden"]');e&&(t.setAttribute("name",`_visualized_${t.name}`),t.closest("label").addEventListener("click",n=>{n.target.tagName!=="INPUT"&&(n.preventDefault(),t.checked=!t.checked,t.dispatchEvent(new Event("change")))}),t.addEventListener("change",()=>{e.value=t.checked?1:0,e.dispatchEvent(new Event("change"))}))},onRemoveFile:t=>{if(!t)return;const e=t.closest("form"),r=t.closest(g.formGroupSelector);e&&r&&i.addToRemoveList(e,r.dataset.formGroup),t.remove()}};document.querySelectorAll("form").forEach(t=>{t.addEventListener("submit",()=>{g.handleSubmitters(t)})});document.querySelectorAll("[data-like-submit]").forEach(t=>{t.addEventListener("click",()=>{g.handleSingleSubmitter(t)})});document.querySelectorAll(g.imageSelector).forEach(t=>{g.handleImageInput(t.querySelector('input[type="file"]'))});document.querySelectorAll(g.deleteFileSelector).forEach(t=>{t.addEventListener("click",()=>{g.onRemoveFile(t.closest(g.fileInfoSelector))})});document.querySelectorAll(g.checkboxSelector).forEach(t=>{g.handleCheckbox(t)});window.Feadmin.Form=g;const ye={open(t,e={}){var r,n,s;t.style.removeProperty("display"),document.body.classList.add("fd-overflow-hidden"),(n=(r=e.related)==null?void 0:r.dataset)!=null&&n.action&&this.setFormAction(t,e.related),(s=t.querySelector("[data-modal-autofocus]"))==null||s.focus(),t.dispatchEvent(new CustomEvent("modal.open",{detail:e}))},close(t,e={}){t.style.setProperty("display","none"),document.body.classList.remove("fd-overflow-hidden"),t.dispatchEvent(new CustomEvent("modal.close",{detail:e}))},setFormAction(t,e){const r=t.querySelector("form");r.action=e.dataset.action}},tr=document.querySelectorAll("[data-modal-close]"),le=document.querySelector("[data-modal]");document.addEventListener("click",t=>{const e=t.target.closest("[data-modal-open]");e&&(t.preventDefault(),ye.open(document.querySelector(e.dataset.modalOpen),{related:e}))});tr.forEach(t=>{const e=t.closest("[data-modal]");t.addEventListener("click",()=>ye.close(e,{related:t}))});le==null||le.addEventListener("click",t=>{t.target===le&&ye.close(le)});window.Feadmin.Modal=ye;const L={containerSelector:"[data-collapsible]",toggleSelector:"[data-collapse-toggle]",contentSelector:"[data-collapse-content]",iconSelector:"[data-collapse-icon]",init:()=>{document.querySelectorAll(L.containerSelector).forEach(t=>{const e=t.querySelector(L.toggleSelector);e==null||e.addEventListener("click",r=>{r.preventDefault(),L.toggle(e.closest(L.containerSelector))})})},toggle:(t,e=null)=>{e===null?t.setAttribute("aria-expanded",t.getAttribute("aria-expanded")==="true"?"false":"true"):e?t.setAttribute("aria-expanded","true"):t.setAttribute("aria-expanded","false")},open:t=>{L.toggle(t,!0)},close:t=>{L.toggle(t,!1)}};L.init();const p={fieldSelector:"[data-taxonomy-field]",primaryGroupSelector:"[data-primary-taxonomy-group]",primarySelectSelector:"[data-primary-taxonomy-select]",checkboxSelector:"[data-taxonomy-checkbox]",displaySelect:t=>{t.querySelector(p.primaryGroupSelector).classList.remove("fd-hidden")},hideSelect:t=>{t.querySelector(p.primaryGroupSelector).classList.add("fd-hidden")},clearSelectOptions:t=>{const e=t.querySelector(p.primarySelectSelector);for(;e.options.length>1;)e.remove(1)},createOption:(t,e,r)=>{const n=t.querySelector(p.primarySelectSelector),s=document.createElement("option");s.value=e,s.text=r,n.dataset.primaryTaxonomySelect===e&&(s.selected=!0),n.appendChild(s)},onChange:t=>{const e=t.querySelectorAll(p.checkboxSelector),r=Array.from(e).filter(n=>n.checked);p.clearSelectOptions(t),r.map(n=>{p.createOption(t,n.value,n.dataset.taxonomyCheckbox)}),r.length>0?p.displaySelect(t):p.hideSelect(t)}},rr=document.querySelectorAll(p.checkboxSelector);rr.forEach(t=>{t.addEventListener("change",e=>{p.onChange(e.target.closest(p.fieldSelector))})});const nr=document.querySelectorAll(p.fieldSelector);nr.forEach(t=>{p.onChange(t)});
